<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>Hello World</title>
    </head>
    <body>
    	<h1>首页</h1>

        <br>
        <input type="button" onclick="buttonClick()" value="弹出登录界面"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick7()" value="检测是否登录"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick1()" value="弹出绑定手机号页面"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick6()" value="弹出个人中心页面"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick2()" value="分享"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick3()" value="获取用户信息"/>
        </br>
        <br/>
        <br>
        <input type="button" onclick="buttonClick5()" value="获取支付平台并发起支付"/>
        </br>
        <br/>


        <script type="text/javascript" src="http://injection.android/cordova.js"></script>
        <script type="text/javascript" src="http://injection.android/tmcontroller.js"></script>

        <script type="text/javascript">
        	function buttonClick(){
				 var onSuccess = function(data) {
				    alert('跳转到登录页面：' + data);
				  };
				  function onError(msg) {
				    alert('error: ' + msg);
				  }
                  TMController.openLoginInterface(onSuccess,onError);
			}
            function buttonClick7(){
                var onSuccess = function(result) {
                    alert('是否登录：' + result);
                };
                TMController.checkLogin(onSuccess);
            }
            function buttonClick6(){
                var onSuccess = function(data) {
                    alert('跳转到个人中心页面');
                };
                function onError(msg) {
                    alert('error: ' + msg);
                }
                TMController.openUCMainInterface(onSuccess, onError);
            }
			 function buttonClick1(){
				 var onSuccess = function(data) {
				    alert('跳转到手机号页面');
				  };
				  function onError(msg) {
				    alert('error: ' + msg);
				  }
                  TMController.openBindingMobileInterface(onSuccess,onError);
			}
			function buttonClick2(){
				  var onSuccess = function(data) {
				    //platformType：分享的平台信息，1：QQ，2：微信，3：微博，4：未知
				    alert('platformType: ' + data.platformType + '\n');
				  };
				  function onError(msg) {
				    alert('error: ' + msg);
				  }
                 TMController.shareUrl(onSuccess, onError, "https://www.baidu.com", "你好", "你好啊", "");
			}
        function buttonClick3(){
            
            var onSuccess = function(data) {
                alert('token: ' + data.token + '\n' + 'member_code: ' + data.member_code + '\n' + 'member_id: ' + data.member_id + '\n');
                // 返回的更多信息参考TMHttpUserInstance.h类文件
            };
            function onError(msg) {
                alert('error: ' + msg);
            }

            TMController.getUser(onSuccess, onError);
        }
        

        function buttonClick5(){
            
            var onSuccess = function(data) {
                var onSuccess1 = function() {
                    alert('支付成功');
                };
                function onError1(msg) {
                    alert('error: ' + msg);
                }
                
                var orderInfo;
                if (data == 1) {
                    orderInfo = "alipay_sdk=alipay-sdk-php-20161101&app_id=2018060560312707&biz_content=%7B%22out_trade_no%22%3A1545363241%2C%22subject%22%3A%22%5Cu5546%5Cu54c1%5Cu6807%5Cu9898%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22total_amount%22%3A0.01%2C%22timeout_express%22%3A%2230m%22%7D&charset=UTF-8&format=json&method=alipay.trade.app.pay&notify_url=http%3A%2F%2Fdev.360tianma.com%2Fapi%2Ftmpaydemo%2Fnotify&sign_type=RSA2&timestamp=2018-12-21+11%3A34%3A01&version=1.0&sign=aEVJw3J7eMkIYsE%2BOQP1q6ar8HtSXhWevyrSQF88qUYsJDRDZ%2BbscBz6hBfxoT0z9NsiXmF6CTenxV4%2B2V0RrEAPy7wTrDgHeJTqWHdCq0sg9MAeDatPKqsnRh7cpVRjSooHKYFbD3MEZkWcEZYDW1BNTW4eMfiTA6k8U%2FgOH%2F2Yzz1yacNuOnd2lE3xhAtta5e90mpX2gMK%2FL4hEEBGWFz8E%2BNxnLvtHT8ap8ZfRN8ZU6OKL5RIu03yOuh4ge6jHo9WP1F1niLyRNUcOzUOEIbychYxlh0TlKvmFX1NwrGFSTG3WVFJKVyRwpRUYf%2BvFQt6NHehXZc6Sh7StLDj%2BQ%3D%3D";
                } else {
                    orderInfo = "{\"appid\":\"wxf5434529e3d5f55c\",\"noncestr\":\"v2qsf11Biair4Sz2\",\"package\":\"Sign=WXPay\",\"partnerid\":\"1518233991\",\"prepayid\":\"wx21113426901497f008ee46ad1613556371\",\"timestamp\":1545363266,\"sign\":\"BD6B59ED898C6DBDD629FAD33149669F\"}";
                }
                TMController.gotoPay(onSuccess1, onError1, data, orderInfo);
            };
            function onError(msg) {
                alert('error: ' + msg);
            }
            TMController.showPayDialog(onSuccess, onError, "0.01");
        }

    </script>
    </body>
</html>


